import{computePosition,flip,shift,offset,arrow}from"https://cdn.jsdelivr.net/npm/@floating-ui/dom@1.7.4/+esm";class SidebarManager{constructor(t,e,i="sidebar--active"){this.sidebar=document.querySelector(t),this.toggleBtn=document.querySelector(e),this.activeClass=i,this.sidebar&&this.toggleBtn&&this.init()}init(){this.toggleBtn.addEventListener("click",t=>{t.stopPropagation(),this.toggle()}),document.addEventListener("click",t=>{this.sidebar.classList.contains(this.activeClass)&&!this.sidebar.contains(t.target)&&t.target!==this.toggleBtn&&this.close()}),document.addEventListener("keydown",t=>{"Escape"===t.key&&this.close()})}toggle(){this.sidebar.classList.toggle(this.activeClass);const t=this.sidebar.classList.contains(this.activeClass);this.toggleBtn.setAttribute("aria-expanded",t),this.toggleBtn.querySelector(".mdi-menu").classList.toggle("menu-toggle__icon--off"),this.toggleBtn.querySelector(".mdi-close").classList.toggle("menu-toggle__icon--off")}close(){this.sidebar.classList.remove(this.activeClass),this.toggleBtn.setAttribute("aria-expanded","false"),this.toggleBtn.querySelector(".mdi-menu").classList.toggle("menu-toggle__icon--off"),this.toggleBtn.querySelector(".mdi-close").classList.toggle("menu-toggle__icon--off")}}class TooltipManager{constructor(t){this.targets=document.querySelectorAll(t),this.tooltipEl=this.createTooltipElement(),this.arrowEl=this.tooltipEl.querySelector(".tooltip__arrow"),this.init()}createTooltipElement(){const t=document.createElement("div");return t.id=`tooltip-${Math.random().toString(36).substr(2,9)}`,t.className="tooltip",t.role="tooltip",t.setAttribute("aria-hidden","true"),t.innerHTML='<span></span><div class="tooltip__arrow"></div>',document.body.appendChild(t),t}init(){this.targets.forEach(t=>{t.addEventListener("mouseenter",()=>this.show(t)),t.addEventListener("focus",()=>this.show(t)),t.addEventListener("mouseleave",()=>this.hide(t)),t.addEventListener("blur",()=>this.hide(t))})}async show(t){const e=t.querySelector(".sidebar__link-text");if(e&&"none"!==window.getComputedStyle(e).display)return;const i=t.getAttribute("data-tooltip");if(!i)return;this.tooltipEl.querySelector("span").textContent=i,t.setAttribute("aria-describedby",this.tooltipEl.id),this.tooltipEl.setAttribute("aria-hidden","false");const{x:s,y:o,placement:l,middlewareData:a}=await computePosition(t,this.tooltipEl,{placement:"right",middleware:[offset(15),flip(),shift({padding:5}),arrow({element:this.arrowEl})]});Object.assign(this.tooltipEl.style,{left:`${s}px`,top:`${o}px`});const{x:r,y:n}=a.arrow,d={top:"bottom",right:"left",bottom:"top",left:"right"}[l.split("-")[0]];Object.assign(this.arrowEl.style,{left:null!=r?`${r}px`:"",top:null!=n?`${n}px`:"",right:"",bottom:"",[d]:"-4px"}),this.tooltipEl.classList.add("tooltip--visible")}hide(t){this.tooltipEl.classList.remove("tooltip--visible"),this.tooltipEl.setAttribute("aria-hidden","true"),t&&t.removeAttribute("aria-describedby")}}document.addEventListener("DOMContentLoaded",()=>{new SidebarManager(".sidebar","#menu-toggle"),new TooltipManager(".sidebar__link")});