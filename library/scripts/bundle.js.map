{
  "version": 3,
  "sources": ["script.js", "ui-controller.js", "modal-controller.js", "main.js"],
  "sourcesContent": ["/**\n * Represents a Book in the library.\n */\nexport class Book {\n  constructor(title, author, pages, read) {\n    this.id = crypto.randomUUID();\n    this.title = title;\n    this.author = author;\n    this.pages = pages;\n    this.read = read;\n  }\n\n  toggleReadStatus() {\n    this.read = !this.read;\n  }\n}\n\n/**\n * Manages the collection of books.\n */\nexport class Library {\n  constructor() {\n    this.books = [];\n  }\n\n  addBook(title, author, pages, read) {\n    const newBook = new Book(title, author, pages, read);\n    this.books.push(newBook);\n    return newBook;\n  }\n\n  removeBook(id) {\n    this.books = this.books.filter((book) => book.id !== id);\n  }\n\n  getBooks() {\n    return this.books;\n  }\n\n  toggleBookStatus(id) {\n    const book = this.books.find((b) => b.id === id);\n    if (book) {\n      book.toggleReadStatus();\n    }\n    return book;\n  }\n}\n", "/**\n * Handles DOM rendering and UI updates.\n */\nexport class UIController {\n  constructor(library, gridId) {\n    this.library = library;\n    this.grid = document.getElementById(gridId);\n  }\n\n  render() {\n    this.grid.innerHTML = '';\n    const books = this.library.getBooks();\n\n    books.forEach((book) => {\n      const card = this.createBookCard(book);\n      this.grid.appendChild(card);\n    });\n  }\n\n  addBookToUI(book) {\n    const card = this.createBookCard(book);\n\n    // Add entry class and append\n    card.classList.add('book-card--adding');\n    this.grid.appendChild(card);\n\n    // Trigger entry animation by removing the class in the next frame\n    // Double requestAnimationFrame ensures the browser has rendered the initial state\n    requestAnimationFrame(() => {\n      requestAnimationFrame(() => {\n        card.classList.remove('book-card--adding');\n      });\n    });\n  }\n\n  createBookCard(book) {\n    const article = document.createElement('article');\n    article.classList.add('book-card');\n    article.dataset.id = book.id;\n\n    // Visual Hierarchy\n    article.innerHTML = `\n      <div class=\"book-card__content\">\n        <h2 class=\"book-card__title\">${book.title}</h2>\n        <p class=\"book-card__author\">by ${book.author}</p>\n        <p class=\"book-card__pages\">${book.pages} pages</p>\n        <div class=\"book-card__status ${book.read ? 'book-card__status--read' : ''}\">\n          ${book.read ? 'Read' : 'Not Read'}\n        </div>\n      </div>\n      <div class=\"book-card__actions\">\n        <button class=\"btn btn--toggle\" aria-label=\"Toggle read status for ${book.title}\">\n          ${book.read ? 'Mark Unread' : 'Mark Read'}\n        </button>\n        <button class=\"btn btn--danger\" aria-label=\"Remove ${book.title} from library\">\n          <svg xmlns=\"http://www.w3.org/2000/svg\" width=\"20\" height=\"20\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" stroke-width=\"2\" stroke-linecap=\"round\" stroke-linejoin=\"round\"><path d=\"M3 6h18\"/><path d=\"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6\"/><path d=\"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2\"/><line x1=\"10\" y1=\"11\" x2=\"10\" y2=\"17\"/><line x1=\"14\" y1=\"11\" x2=\"14\" y2=\"17\"/></svg>\n        </button>\n      </div>\n    `;\n\n    // Add event listeners to card buttons\n    const toggleBtn = article.querySelector('.btn--toggle');\n    const removeBtn = article.querySelector('.btn--danger');\n\n    toggleBtn.addEventListener('click', () => {\n      const updatedBook = this.library.toggleBookStatus(book.id);\n      const statusTag = article.querySelector('.book-card__status');\n\n      statusTag.classList.toggle('book-card__status--read', updatedBook.read);\n\n      statusTag.textContent = updatedBook.read ? 'Read' : 'Not Read';\n      toggleBtn.textContent = updatedBook.read ? 'Mark Unread' : 'Mark Read';\n    });\n\n    removeBtn.addEventListener('click', () => {\n      if (document.startViewTransition) {\n        // Assign a temporary name for the transition\n        article.style.viewTransitionName = 'removing-card';\n\n        document.startViewTransition(() => {\n          this.library.removeBook(book.id);\n          article.remove();\n        });\n      } else {\n        // Fallback for browsers without View Transitions\n        const cleanup = () => {\n          this.library.removeBook(book.id);\n          article.remove();\n        };\n\n        article.classList.add('book-card--removing');\n        article.replaceChildren();\n\n        // Use transitionend with a timeout safety to ensure cleanup runs\n        let cleaned = false;\n        const handleCleanup = () => {\n          if (cleaned) return;\n          cleaned = true;\n          cleanup();\n        };\n\n        article.addEventListener('transitionend', handleCleanup, { once: true });\n        // Safety timeout slightly longer than the transition (0.5s)\n        setTimeout(handleCleanup, 600);\n      }\n    });\n\n    return article;\n  }\n}\n", "/**\n * Handles modal dialog interactions.\n */\nexport class ModalController {\n  constructor(dialogId, openBtnId, cancelBtnId) {\n    this.dialog = document.getElementById(dialogId);\n    this.openBtn = document.getElementById(openBtnId);\n    this.cancelBtn = document.getElementById(cancelBtnId);\n\n    this.init();\n  }\n\n  init() {\n    this.openBtn.addEventListener('click', () => this.open());\n    this.cancelBtn.addEventListener('click', () => this.close());\n\n    // Close on outside click (backdrop)\n    this.dialog.addEventListener('click', (e) => {\n      const dialogDimensions = this.dialog.getBoundingClientRect();\n      if (e.clientX < dialogDimensions.left || e.clientX > dialogDimensions.right || e.clientY < dialogDimensions.top || e.clientY > dialogDimensions.bottom) {\n        this.close();\n      }\n    });\n  }\n\n  open() {\n    this.dialog.showModal();\n  }\n\n  close() {\n    const form = this.dialog.querySelector('form');\n    if (form) form.reset();\n    this.dialog.close();\n  }\n}\n", "import { Library } from './script.js';\nimport { UIController } from './ui-controller.js';\nimport { ModalController } from './modal-controller.js';\n\n// Initial sample books for testing\nconst myLibrary = new Library();\nmyLibrary.addBook('The Hobbit', 'J.R.R. Tolkien', 310, true);\nmyLibrary.addBook('Project Hail Mary', 'Andy Weir', 476, false);\nmyLibrary.addBook('The Great Gatsby', 'F. Scott Fitzgerald', 180, true);\n\n// Initialize Application\ndocument.addEventListener('DOMContentLoaded', () => {\n  const ui = new UIController(myLibrary, 'book-grid');\n  const modal = new ModalController('book-dialog', 'add-book-btn', 'cancel-btn');\n\n  // Initial Render\n  ui.render();\n\n  // Form Submission\n  const bookForm = document.getElementById('book-form');\n  bookForm.addEventListener('submit', (e) => {\n    e.preventDefault();\n    const formData = new FormData(bookForm);\n    const title = formData.get('title');\n    const author = formData.get('author');\n    const pages = formData.get('pages');\n    const read = formData.get('read') === 'on';\n\n    modal.close();\n    ui.addBookToUI(myLibrary.addBook(title, author, pages, read));\n  });\n});\n"],
  "mappings": "MAGO,IAAMA,EAAN,KAAW,CAChB,YAAYC,EAAOC,EAAQC,EAAOC,EAAM,CACtC,KAAK,GAAK,OAAO,WAAW,EAC5B,KAAK,MAAQH,EACb,KAAK,OAASC,EACd,KAAK,MAAQC,EACb,KAAK,KAAOC,CACd,CAEA,kBAAmB,CACjB,KAAK,KAAO,CAAC,KAAK,IACpB,CACF,EAKaC,EAAN,KAAc,CACnB,aAAc,CACZ,KAAK,MAAQ,CAAC,CAChB,CAEA,QAAQJ,EAAOC,EAAQC,EAAOC,EAAM,CAClC,IAAME,EAAU,IAAIN,EAAKC,EAAOC,EAAQC,EAAOC,CAAI,EACnD,YAAK,MAAM,KAAKE,CAAO,EAChBA,CACT,CAEA,WAAWC,EAAI,CACb,KAAK,MAAQ,KAAK,MAAM,OAAQC,GAASA,EAAK,KAAOD,CAAE,CACzD,CAEA,UAAW,CACT,OAAO,KAAK,KACd,CAEA,iBAAiBA,EAAI,CACnB,IAAMC,EAAO,KAAK,MAAM,KAAMC,GAAMA,EAAE,KAAOF,CAAE,EAC/C,OAAIC,GACFA,EAAK,iBAAiB,EAEjBA,CACT,CACF,EC3CO,IAAME,EAAN,KAAmB,CACxB,YAAYC,EAASC,EAAQ,CAC3B,KAAK,QAAUD,EACf,KAAK,KAAO,SAAS,eAAeC,CAAM,CAC5C,CAEA,QAAS,CACP,KAAK,KAAK,UAAY,GACR,KAAK,QAAQ,SAAS,EAE9B,QAASC,GAAS,CACtB,IAAMC,EAAO,KAAK,eAAeD,CAAI,EACrC,KAAK,KAAK,YAAYC,CAAI,CAC5B,CAAC,CACH,CAEA,YAAYD,EAAM,CAChB,IAAMC,EAAO,KAAK,eAAeD,CAAI,EAGrCC,EAAK,UAAU,IAAI,mBAAmB,EACtC,KAAK,KAAK,YAAYA,CAAI,EAI1B,sBAAsB,IAAM,CAC1B,sBAAsB,IAAM,CAC1BA,EAAK,UAAU,OAAO,mBAAmB,CAC3C,CAAC,CACH,CAAC,CACH,CAEA,eAAeD,EAAM,CACnB,IAAME,EAAU,SAAS,cAAc,SAAS,EAChDA,EAAQ,UAAU,IAAI,WAAW,EACjCA,EAAQ,QAAQ,GAAKF,EAAK,GAG1BE,EAAQ,UAAY;AAAA;AAAA,uCAEeF,EAAK,KAAK;AAAA,0CACPA,EAAK,MAAM;AAAA,sCACfA,EAAK,KAAK;AAAA,wCACRA,EAAK,KAAO,0BAA4B,EAAE;AAAA,YACtEA,EAAK,KAAO,OAAS,UAAU;AAAA;AAAA;AAAA;AAAA,6EAIkCA,EAAK,KAAK;AAAA,YAC3EA,EAAK,KAAO,cAAgB,WAAW;AAAA;AAAA,6DAEUA,EAAK,KAAK;AAAA;AAAA;AAAA;AAAA,MAOnE,IAAMG,EAAYD,EAAQ,cAAc,cAAc,EAChDE,EAAYF,EAAQ,cAAc,cAAc,EAEtD,OAAAC,EAAU,iBAAiB,QAAS,IAAM,CACxC,IAAME,EAAc,KAAK,QAAQ,iBAAiBL,EAAK,EAAE,EACnDM,EAAYJ,EAAQ,cAAc,oBAAoB,EAE5DI,EAAU,UAAU,OAAO,0BAA2BD,EAAY,IAAI,EAEtEC,EAAU,YAAcD,EAAY,KAAO,OAAS,WACpDF,EAAU,YAAcE,EAAY,KAAO,cAAgB,WAC7D,CAAC,EAEDD,EAAU,iBAAiB,QAAS,IAAM,CACxC,GAAI,SAAS,oBAEXF,EAAQ,MAAM,mBAAqB,gBAEnC,SAAS,oBAAoB,IAAM,CACjC,KAAK,QAAQ,WAAWF,EAAK,EAAE,EAC/BE,EAAQ,OAAO,CACjB,CAAC,MACI,CAEL,IAAMK,EAAU,IAAM,CACpB,KAAK,QAAQ,WAAWP,EAAK,EAAE,EAC/BE,EAAQ,OAAO,CACjB,EAEAA,EAAQ,UAAU,IAAI,qBAAqB,EAC3CA,EAAQ,gBAAgB,EAGxB,IAAIM,EAAU,GACRC,EAAgB,IAAM,CACtBD,IACJA,EAAU,GACVD,EAAQ,EACV,EAEAL,EAAQ,iBAAiB,gBAAiBO,EAAe,CAAE,KAAM,EAAK,CAAC,EAEvE,WAAWA,EAAe,GAAG,CAC/B,CACF,CAAC,EAEMP,CACT,CACF,EC1GO,IAAMQ,EAAN,KAAsB,CAC3B,YAAYC,EAAUC,EAAWC,EAAa,CAC5C,KAAK,OAAS,SAAS,eAAeF,CAAQ,EAC9C,KAAK,QAAU,SAAS,eAAeC,CAAS,EAChD,KAAK,UAAY,SAAS,eAAeC,CAAW,EAEpD,KAAK,KAAK,CACZ,CAEA,MAAO,CACL,KAAK,QAAQ,iBAAiB,QAAS,IAAM,KAAK,KAAK,CAAC,EACxD,KAAK,UAAU,iBAAiB,QAAS,IAAM,KAAK,MAAM,CAAC,EAG3D,KAAK,OAAO,iBAAiB,QAAU,GAAM,CAC3C,IAAMC,EAAmB,KAAK,OAAO,sBAAsB,GACvD,EAAE,QAAUA,EAAiB,MAAQ,EAAE,QAAUA,EAAiB,OAAS,EAAE,QAAUA,EAAiB,KAAO,EAAE,QAAUA,EAAiB,SAC9I,KAAK,MAAM,CAEf,CAAC,CACH,CAEA,MAAO,CACL,KAAK,OAAO,UAAU,CACxB,CAEA,OAAQ,CACN,IAAMC,EAAO,KAAK,OAAO,cAAc,MAAM,EACzCA,GAAMA,EAAK,MAAM,EACrB,KAAK,OAAO,MAAM,CACpB,CACF,EC7BA,IAAMC,EAAY,IAAIC,EACtBD,EAAU,QAAQ,aAAc,iBAAkB,IAAK,EAAI,EAC3DA,EAAU,QAAQ,oBAAqB,YAAa,IAAK,EAAK,EAC9DA,EAAU,QAAQ,mBAAoB,sBAAuB,IAAK,EAAI,EAGtE,SAAS,iBAAiB,mBAAoB,IAAM,CAClD,IAAME,EAAK,IAAIC,EAAaH,EAAW,WAAW,EAC5CI,EAAQ,IAAIC,EAAgB,cAAe,eAAgB,YAAY,EAG7EH,EAAG,OAAO,EAGV,IAAMI,EAAW,SAAS,eAAe,WAAW,EACpDA,EAAS,iBAAiB,SAAWC,GAAM,CACzCA,EAAE,eAAe,EACjB,IAAMC,EAAW,IAAI,SAASF,CAAQ,EAChCG,EAAQD,EAAS,IAAI,OAAO,EAC5BE,EAASF,EAAS,IAAI,QAAQ,EAC9BG,EAAQH,EAAS,IAAI,OAAO,EAC5BI,EAAOJ,EAAS,IAAI,MAAM,IAAM,KAEtCJ,EAAM,MAAM,EACZF,EAAG,YAAYF,EAAU,QAAQS,EAAOC,EAAQC,EAAOC,CAAI,CAAC,CAC9D,CAAC,CACH,CAAC",
  "names": ["Book", "title", "author", "pages", "read", "Library", "newBook", "id", "book", "b", "UIController", "library", "gridId", "book", "card", "article", "toggleBtn", "removeBtn", "updatedBook", "statusTag", "cleanup", "cleaned", "handleCleanup", "ModalController", "dialogId", "openBtnId", "cancelBtnId", "dialogDimensions", "form", "myLibrary", "Library", "ui", "UIController", "modal", "ModalController", "bookForm", "e", "formData", "title", "author", "pages", "read"]
}
